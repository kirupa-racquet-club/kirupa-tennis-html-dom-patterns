<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>HTML DOM Patterns</title>
	<style type="text/css">
	.pattern {
		border: 10px solid black;
		overflow: hidden;
		position: relative;
	}
	.pattern * {
		position: absolute;
	}

	.patch {
		width: 100px;
		height: 100px;
		background-color: SteelBlue;
		overflow: hidden;
	}

	.patch .pixel {
		width: 3px;
		height: 3px;
		background-color: DeepSkyBlue;
	}
	</style>
</head>
<body>

<script>
function createPatch(str){
	var textSize = 10;
	var w = textSize * str.length;
	var h = textSize + 3; // some sort of buffer for stuff under the baseline
	var patch = document.createElement("div");
	patch.className = "patch";
	
    var canvas = document.createElement("canvas");
    canvas.width = w;
    canvas.height = h;
	
    var ctx = canvas.getContext("2d");
    ctx.fillStyle = "black";
    ctx.font = textSize + "px Consolas";
    ctx.fillText(str, textSize, textSize, w);
	
	var pixels = ctx.getImageData(0, 0, w, h).data;

	for(var i = 0; i < pixels.length; i += 4 /* bytes */){
		var pixel = pixels[i + 3];
		if(!pixel) continue;
		var x = (((i / 4) | 0) % w);
		var y = (((i / h + 3) | 0) / 4) | 0;
		patch.appendChild(createElemAt(x, y, "pixel"));
	}
	
	return patch;
}

function createElemAt(x, y, className){
	var elem = document.createElement("div");
	elem.className = className;
	elem.style.left = x + "px";
	elem.style.top = y + "px";
	return elem;
}

function createPattern(countX, countY, offsetX, offsetY, srcPatch){
	var pattern = document.createElement("div");
	pattern.className = "pattern";
	pattern.style.width = countX * offsetX + "px";
	pattern.style.height = countY * offsetY + "px";

	for (var y=0; y<countY; y++){
		for (var x=0; x<countX; x++){
			
			var patch = srcPatch.cloneNode(true);
			patch.style.left = x * offsetX + "px";
			patch.style.top = y * offsetY + "px";
			pattern.appendChild(patch);

		}
	}

	return pattern;
}

var patch = createPatch("O___o");
var pattern = createPattern(6, 4, 100, 100, patch);
document.body.appendChild(pattern);
</script>
</body>
</html>